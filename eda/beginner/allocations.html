<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="KPN Mini SReXperts hackathon event guidelines" name=description><meta content=Nokia name=author><link href=https://kpn.srexperts.net/eda/beginner/allocations.html rel=canonical><link href=../../intro/label-based-selection.html rel=prev><link href=configlets.html rel=next><link href=../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.6.14" name=generator><title>Allocations - KPN Mini SReXperts EDA hackathon 2026</title><link href=../../assets/stylesheets/main.342714a4.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../stylesheets/nokia.css rel=stylesheet><link href=../../stylesheets/nokia-fonts.css rel=stylesheet><link href=../../stylesheets/diagrams.css rel=stylesheet><link href=../../stylesheets/animations.css rel=stylesheet><link href=../../stylesheets/feedback.css rel=stylesheet><link href=../../stylesheets/collapse-code.css rel=stylesheet><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#allocations> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="KPN Mini SReXperts EDA hackathon 2026" class="md-header__button md-logo" data-md-component=logo href=../../index.html title="KPN Mini SReXperts EDA hackathon 2026"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KPN Mini SReXperts EDA hackathon 2026 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Allocations </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix tabindex=0> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="KPN Mini SReXperts EDA hackathon 2026" class="md-nav__button md-logo" data-md-component=logo href=../../index.html title="KPN Mini SReXperts EDA hackathon 2026"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> KPN Mini SReXperts EDA hackathon 2026 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../index.html> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Intro </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_2_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Intro </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../intro/index.html> <span class=md-ellipsis> EDA </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../intro/srl-cli.html> <span class=md-ellipsis> SR Linux CLI </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../intro/declarative-intents.html> <span class=md-ellipsis> Declarative Intents </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../intro/eda-query-language.html> <span class=md-ellipsis> EDA Query Language </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Underlay/Overlay Networks </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_3_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Underlay/Overlay Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../underlay/fabrics.html> <span class=md-ellipsis> Fabrics </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Telco-Cloud use-case </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Telco-Cloud use-case </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../telco-cloud/unequal-ecmp.html> <span class=md-ellipsis> Unequal ECMP </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5 type=checkbox> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> References </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_5_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> References </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_5_1 type=checkbox> <label class=md-nav__link for=__nav_5_1 id=__nav_5_1_label tabindex=0> <span class=md-ellipsis> EDA Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_5_1_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_1> <span class="md-nav__icon md-icon"></span> EDA Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../intro/label-based-selection.html> <span class=md-ellipsis> Label-based Selection </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Allocations </span> <span class="md-nav__icon md-icon"></span> </label> <a class="md-nav__link md-nav__link--active" href=allocations.html> <span class=md-ellipsis> Allocations </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#objective> <span class=md-ellipsis> Objective </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#technology-explanation> <span class=md-ellipsis> Technology Explanation </span> </a> <nav aria-label="Technology Explanation" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#creating-an-allocation-pool> <span class=md-ellipsis> Creating an Allocation Pool </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-allocation-pools> <span class=md-ellipsis> Using Allocation Pools </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#custom-allocations> <span class=md-ellipsis> Custom Allocations </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#reservations> <span class=md-ellipsis> Reservations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#tasks> <span class=md-ellipsis> Tasks </span> </a> <nav aria-label=Tasks class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#identify-allocation-pools> <span class=md-ellipsis> Identify Allocation Pools </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#find-allocated-asn-numbers> <span class=md-ellipsis> Find Allocated ASN Numbers </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#changing-as-numbering-scheme> <span class=md-ellipsis> Changing AS Numbering scheme </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=configlets.html> <span class=md-ellipsis> Configlets </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_2 type=checkbox> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Services </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_2_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../overlay/bridge-domains.html> <span class=md-ellipsis> Bridge Domains </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../overlay/routers.html> <span class=md-ellipsis> Routers </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../overlay/virtual-networks.html> <span class=md-ellipsis> Virtual Networks </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id=__nav_5_3 type=checkbox> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_5_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../intermediate/install-eda.html> <span class=md-ellipsis> Install Your Own EDA </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../intermediate/custom-allocations.html> <span class=md-ellipsis> Custom Allocations </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../intermediate/api.html> <span class=md-ellipsis> REST API </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../advanced/service-automation.html> <span class=md-ellipsis> Service Automation using Python </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#objective> <span class=md-ellipsis> Objective </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#technology-explanation> <span class=md-ellipsis> Technology Explanation </span> </a> <nav aria-label="Technology Explanation" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#creating-an-allocation-pool> <span class=md-ellipsis> Creating an Allocation Pool </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-allocation-pools> <span class=md-ellipsis> Using Allocation Pools </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#custom-allocations> <span class=md-ellipsis> Custom Allocations </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#reservations> <span class=md-ellipsis> Reservations </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#tasks> <span class=md-ellipsis> Tasks </span> </a> <nav aria-label=Tasks class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#identify-allocation-pools> <span class=md-ellipsis> Identify Allocation Pools </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#find-allocated-asn-numbers> <span class=md-ellipsis> Find Allocated ASN Numbers </span> </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#changing-as-numbering-scheme> <span class=md-ellipsis> Changing AS Numbering scheme </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=allocations><span class="enumerate-headings-plugin enumerate-heading-plugin">1.</span> Allocations<a class=headerlink href=#allocations title="Permanent link">#</a></h1> <script async src=https://viewer.diagrams.net/js/viewer-static.min.js type=text/javascript></script> <table> <thead> <tr> <th></th> <th></th> </tr> </thead> <tbody> <tr> <td><strong>Short Description</strong></td> <td>A fully declarative system must have a way to declare, manage and use allocations such as IP addresses, indexes and subnets.</td> </tr> <tr> <td><strong>Difficulty</strong></td> <td>Beginner</td> </tr> <tr> <td><strong>Topology Nodes</strong></td> <td>leaf11, leaf12, leaf13, spine11, spine12</td> </tr> <tr> <td><strong>Tools used</strong></td> <td>EDA UI</td> </tr> <tr> <td><strong>References</strong></td> <td><a href=https://docs.eda.dev/25.8/user-guide/allocation-pools/ >Allocation Pools documentation</a></td> </tr> </tbody> </table> <p>One of infamous challenges of network automation lies in the domain of Network Source of Trust, often abbreviated as NSoT. Managing IP addresses, ASN numbers, VLAN IDs and tunnel indexes without a system that allows you to both manage and enforce allocations to the network elements is a recipe for network configuration drift and sleepless nights.</p> <p>EDA acts as an enforcing source of truth system, as it not only manages the allocation pools with IP addresses, VLAN IDs and so on, but also ensures that the allocated resources are actually provisioned on the managed devices.</p> <div class="admonition note"> <p class=admonition-title>Want to learn more about allocations?</p> <p>After completing this exercise that introduces you to the concept of allocations you may want to try out the more advanced activity - <a href=../intermediate/custom-allocations.html>Custom Allocations</a> - that explores how custom allocations can be defined such that you get to define what resource identifiers are allocated.</p> </div> <h2 id=objective><span class="enumerate-headings-plugin enumerate-heading-plugin">1.1</span> Objective<a class=headerlink href=#objective title="Permanent link">#</a></h2> <p>Our objective is to learn what EDA's Allocation Pools are and how they ensure a consistent and automated way of resource identifiers allocations used in the <a href=declarative-intents.html>EDA Intents</a>.</p> <p>Below is a call flow diagram that illustrates how EDA handles identifiers allocation requests from the user.</p> <pre class=mermaid><code>sequenceDiagram
    participant U as User
    participant A as Interface App
    participant P as Allocation Pool

    U-&gt;&gt;A: I need a new p2p interface&lt;br/&gt;with IP taken out from an allocation pool
    A-&gt;&gt;P: Can I have a new IP&lt;br/&gt;to for the p2p interface I want to create?
    P-&gt;&gt;A: Here is a new unused IP from the pool

    Note over A: Creates a new IP interface&lt;br/&gt;using the IP allocated from the pool

    A-&gt;&gt;U: I have created the interface</code></pre> <h2 id=technology-explanation><span class="enumerate-headings-plugin enumerate-heading-plugin">1.2</span> Technology Explanation<a class=headerlink href=#technology-explanation title="Permanent link">#</a></h2> <p>EDA manages resource identifiers such as IP addresses, VLAN IDs, ASN numbers and tunnel indexes via a concept of <a href=https://docs.eda.dev/25.8/user-guide/allocation-pools/ >Allocation Pools</a>.</p> <p>As with anything in EDA, an Allocation Pool is declaratively defined as a resource of a specific type. Four kinds of allocation pools are available in EDA, each defines a pool with a unique property to cater for a specific allocation use case:</p> <ul> <li><strong>Indices</strong><br> Specify a size and starting value<br> Return an integer on allocation</li> <li><strong>IP Addresses</strong><br> Specify an IPv4 or IPv6 subnet including mask in CIDR format (e.g. <code>192.0.2.0/24</code>)<br> Return an address from the subnet on allocation, without any mask information (e.g. <code>192.0.2.1</code>)</li> <li><strong>IP Addresses + Masks</strong><br> Specify an IPv4 or IPv6 subnet including mask in CIDR format (e.g. <code>192.0.2.0/24</code>)<br> Return an address from the subnet on allocation, with mask information (e.g. <code>192.0.2.1/24</code>)</li> <li><strong>Subnets</strong><br> Specify an IPv4 or IPv6 subnet including mask in CIDR format (e.g. <code>192.0.2.0/24</code>) and a subnet length (e.g. <code>31</code>)<br> Return a subnet of the specified length from the provided subnet on allocation, with mask information (e.g. <code>192.0.2.8/31</code>)</li> </ul> <p>EDA Allocation Pools have certain interesting capabilities that make them play nice in the declarative setting:</p> <ul> <li><strong>Deterministic allocations</strong> — If provided the same allocation input, the value of any previous allocation will be returned. No surprises!</li> <li><strong>Persist allocations</strong> — Restarting the platform does not result in any re-indexing.</li> <li><strong>Implicit freeing of allocations</strong> — If a resource is updated and no longer needs an allocation, it’s freed up for something else.</li> </ul> <h3 id=creating-an-allocation-pool><span class="enumerate-headings-plugin enumerate-heading-plugin">1.2.1</span> Creating an Allocation Pool<a class=headerlink href=#creating-an-allocation-pool title="Permanent link">#</a></h3> <p>An operator would create an allocation pool of a specific kind like any other resource, for example, here is a resource definition for an allocation pool of type <code>indices</code> that is used to allocate AS Numbers:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">core.eda.nokia.com/v1</span>
</span><span id=__span-0-2><a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IndexAllocationPool</span>
</span><span id=__span-0-3><a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-0-4><a href=#__codelineno-0-4 id=__codelineno-0-4 name=__codelineno-0-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">srexperts-asnpool</span>
</span><span id=__span-0-5><a href=#__codelineno-0-5 id=__codelineno-0-5 name=__codelineno-0-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda</span>
</span><span id=__span-0-6><a href=#__codelineno-0-6 id=__codelineno-0-6 name=__codelineno-0-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-0-7><a href=#__codelineno-0-7 id=__codelineno-0-7 name=__codelineno-0-7></a><span class=w>  </span><span class=nt>segments</span><span class=p>:</span>
</span><span id=__span-0-8><a href=#__codelineno-0-8 id=__codelineno-0-8 name=__codelineno-0-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>start</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4200001000</span>
</span><span id=__span-0-9><a href=#__codelineno-0-9 id=__codelineno-0-9 name=__codelineno-0-9></a><span class=w>      </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</span></code></pre></div> <blockquote> <p>The <code>kind</code> field is set to <code>IndexAllocationPool</code> to indicate that this is an allocation pool of type <code>indices</code>.</p> </blockquote> <p>As mentioned above, the indices allocation pools are determined by the <code>start</code> and <code>size</code> fields. You can have many segments in a pool, but the segments must not overlap.</p> <h3 id=using-allocation-pools><span class="enumerate-headings-plugin enumerate-heading-plugin">1.2.2</span> Using Allocation Pools<a class=headerlink href=#using-allocation-pools title="Permanent link">#</a></h3> <p>The YAML above defines the <code>srexperts-asnpool</code> allocation pool, which starts from <code>4200001000</code> and has a size of <code>1000</code> elements in it. Whenever any EDA resource asks for an allocation from this pool, it will be allocated an AS Number from the range <code>[4200001000, 4200001999]</code> in the sequential order.</p> <p>Here is how this pool is referenced in the Fabric resource that creates the DC fabric across all leaf and spines in our topology:</p> <div class="language-yaml highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-1-1> 1</a></span>
<span class=normal><a href=#__codelineno-1-2> 2</a></span>
<span class=normal><a href=#__codelineno-1-3> 3</a></span>
<span class=normal><a href=#__codelineno-1-4> 4</a></span>
<span class=normal><a href=#__codelineno-1-5> 5</a></span>
<span class=normal><a href=#__codelineno-1-6> 6</a></span>
<span class=normal><a href=#__codelineno-1-7> 7</a></span>
<span class=normal><a href=#__codelineno-1-8> 8</a></span>
<span class=normal><a href=#__codelineno-1-9> 9</a></span>
<span class=normal><a href=#__codelineno-1-10>10</a></span>
<span class=normal><a href=#__codelineno-1-11>11</a></span>
<span class=normal><a href=#__codelineno-1-12>12</a></span>
<span class=normal><a href=#__codelineno-1-13>13</a></span>
<span class=normal><a href=#__codelineno-1-14>14</a></span>
<span class=normal><a href=#__codelineno-1-15>15</a></span>
<span class=normal><a href=#__codelineno-1-16>16</a></span>
<span class=normal><a href=#__codelineno-1-17>17</a></span>
<span class=normal><a href=#__codelineno-1-18>18</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fabrics.eda.nokia.com/v1alpha1</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Fabric</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">srexperts-fabric</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7></a><span class=w>  </span><span class=nt>interSwitchLinks</span><span class=p>:</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8></a><span class=w>    </span><span class=nt>linkSelector</span><span class=p>:</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=interSwitch</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10></a><span class=w>    </span><span class=nt>unnumbered</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPV6</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11></a><span class=w>  </span><span class=nt>leafs</span><span class=p>:</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12></a><span class=hll><span class=w>    </span><span class=nt>asnPool</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">srexperts-asnpool</span>
</span></span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13></a><span class=w>    </span><span class=nt>leafNodeSelector</span><span class=p>:</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=leaf</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15></a><span class=w>  </span><span class=nt>overlayProtocol</span><span class=p>:</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16></a><span class=w>    </span><span class=c1># omitted</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17></a><span class=w>  </span><span class=nt>underlayProtocol</span><span class=p>:</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18></a><span class=w>    </span><span class=c1># omitted</span>
</span></code></pre></div></td></tr></table></div> <p>Many resources you find in EDA will allow you to specify either a pool to select the identifier from, or allow you to set the identifier yourself in a static way.</p> <p>For example, when creating a VLAN resource, you can either set the VLAN ID manually, or let EDA allocate a VLAN ID from a pool of VLANs.</p> <div class="language-yaml highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-2-1> 1</a></span>
<span class=normal><a href=#__codelineno-2-2> 2</a></span>
<span class=normal><a href=#__codelineno-2-3> 3</a></span>
<span class=normal><a href=#__codelineno-2-4> 4</a></span>
<span class=normal><a href=#__codelineno-2-5> 5</a></span>
<span class=normal><a href=#__codelineno-2-6> 6</a></span>
<span class=normal><a href=#__codelineno-2-7> 7</a></span>
<span class=normal><a href=#__codelineno-2-8> 8</a></span>
<span class=normal><a href=#__codelineno-2-9> 9</a></span>
<span class=normal><a href=#__codelineno-2-10>10</a></span>
<span class=normal><a href=#__codelineno-2-11>11</a></span>
<span class=normal><a href=#__codelineno-2-12>12</a></span>
<span class=normal><a href=#__codelineno-2-13>13</a></span>
<span class=normal><a href=#__codelineno-2-14>14</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">services.eda.nokia.com/v1</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">VLAN</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">macvrf-100-vlan1</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7></a><span class=w>  </span><span class=nt>bridgeDomain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">macvrf-100</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8></a><span class=w>  </span><span class=nt>interfaceSelector</span><span class=p>:</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">edge-type=compute</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10></a><span class=w>  </span><span class=nt>uplink</span><span class=p>:</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11></a><span class=w>    </span><span class=c1># omitted</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12></a><span class=hll><span class=w>  </span><span class=nt>vlanID</span><span class=p>:</span><span class=w> </span><span class=s>'1'</span>
</span></span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13></a><span class=hll><span class=w>  </span><span class=nt>vlanPool</span><span class=p>:</span><span class=w> </span><span class=s>''</span>
</span></span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14></a><span class=w>  </span><span class=c1># omitted</span>
</span></code></pre></div></td></tr></table></div> <p>In the example above, the VLAN resource is using a statically assigned VLAN ID of <code>1</code>, and does not leverage any allocation pools, as the <code>vlanPool</code> field is left empty.</p> <h3 id=custom-allocations><span class="enumerate-headings-plugin enumerate-heading-plugin">1.2.3</span> Custom Allocations<a class=headerlink href=#custom-allocations title="Permanent link">#</a></h3> <p>Custom Allocations (aka Preallocations) are a way to mark identifiers in an allocation pool allocatable to only specific resources that requested them. For example, from the pool of AS Numbers we can preallocate the AS Number <code>4200001111</code> to the <code>leaf11</code> specifically by creating the allocation.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">core.eda.nokia.com/v1</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IndexAllocationPool</span>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">srexperts-asnpool</span>
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda</span>
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=w>  </span><span class=nt>publishAllocations</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a><span class=w>  </span><span class=nt>segments</span><span class=p>:</span>
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>start</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4200001000</span>
</span><span id=__span-3-10><a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a><span class=w>      </span><span class=nt>size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000</span>
</span><span id=__span-3-11><a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a><span class=w>      </span><span class=nt>allocations</span><span class=p>:</span>
</span><span id=__span-3-12><a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">srexperts-fabric-leaf-leaf11</span>
</span><span id=__span-3-13><a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">4200001111</span>
</span></code></pre></div> <p>The preallocation is defined in the allocation pool resource by providing the <code>allocations</code> block with the list of the following field pairs:</p> <ol> <li><code>name</code>: the "allocation key" that a specific application (fabric in the example above) would provide when requesting an allocation from the pool.</li> <li><code>value</code>: the value that should be allocated to the application.</li> </ol> <p>With the preallocation defined as above, the fabric application can request an allocation from the <code>srexperts-asnpool</code> pool for the <code>leaf11</code> node and the preallocated value <code>4200001111</code> will be returned from the pool as the application would provide a key that matches the <code>name</code> field of the preallocation.</p> <p>Applications are in control of the key format they send along with the request for an allocation. The Fabric apps uses the key in the following format:<br> <code>{fabric-name}-{role-name}-{node-name}</code><br> which in the example above had been translated to <code>srexperts-fabric-leaf-leaf11</code>.</p> <div class="admonition note"> <p class=admonition-title>Custom Allocations activity</p> <p>While this activity introduces you to the concept of allocations, we also have a more advanced - <a href=../intermediate/custom-allocations.html>Custom Allocations</a> - exercise that you can try out to understand how you can pre-allocate resources from the pool and to have deterministic allocation results.</p> </div> <h3 id=reservations><span class="enumerate-headings-plugin enumerate-heading-plugin">1.2.4</span> Reservations<a class=headerlink href=#reservations title="Permanent link">#</a></h3> <p>What if you want to reserve a block of indices, ip addresses or subnets from being allocated? For example, you want to create an IP Address pool that allocates IP addresses from subnet <code>10.1.0.0/16</code> and reserve the first 100 addresses as they are not used in your design, or allocated for other systems, not managed by EDA.</p> <p>This is a job for <strong>Reservations</strong>. Reservations allow you to define blocks of identifiers that should not be allocated from this pool, effectively making them "reserved". Here is how we would define the reservations for the IP Address pool as per our intent to block first 100 addresses from a subnet:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">core.eda.nokia.com/v1</span>
</span><span id=__span-4-2><a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPAllocationPool</span>
</span><span id=__span-4-3><a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-4-4><a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-ip-pool</span>
</span><span id=__span-4-5><a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda</span>
</span><span id=__span-4-6><a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-4-7><a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a><span class=w>  </span><span class=nt>segments</span><span class=p>:</span>
</span><span id=__span-4-8><a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>reservations</span><span class=p>:</span>
</span><span id=__span-4-9><a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>end</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.1.0.0</span>
</span><span id=__span-4-10><a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>          </span><span class=nt>start</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.1.0.99</span>
</span><span id=__span-4-11><a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a><span class=w>      </span><span class=nt>subnet</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10.1.0.0/16</span>
</span></code></pre></div> <h2 id=tasks><span class="enumerate-headings-plugin enumerate-heading-plugin">1.3</span> Tasks<a class=headerlink href=#tasks title="Permanent link">#</a></h2> <h3 id=identify-allocation-pools><span class="enumerate-headings-plugin enumerate-heading-plugin">1.3.1</span> Identify Allocation Pools<a class=headerlink href=#identify-allocation-pools title="Permanent link">#</a></h3> <p>Your first task is to find the existing allocation pools in the <code>eda</code> namespace. Start by logging in the EDA UI and find the Allocation Pools.</p> <details class=example> <summary>Hint: How to find existing allocation pools in UI</summary> <p>Look for <strong>Allocations</strong> group in the left sidebar.</p> </details> <p>You may also use Kubernetes API and <code>kubectl</code> tool available on the server instance to find existing allocation pools. Try listing Index Allocation Pools using <code>kubectl</code>, you will need to know the resource kind to use; maybe EDA UI can give you a hint?</p> <details class=example> <summary>Hint: How to find allocation pool kind?</summary> <p>To find the resource kind for the specific allocation, find the allocation resource in the EDA UI, and switch to the YAML view of the resource to see its kind:</p> <video controls playsinline style="overflow: hidden; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); border-radius: 0.25rem;" width=100%> <source src=https://gitlab.com/rdodin/pics/-/wikis/uploads/79d2d2257bef8afd26e7adb39366c210/CleanShot_2025-08-14_at_13.38.08.mp4 type=video/mp4> </video> <p>Knowing the resource kind, you can use <code>kubectl</code> and list resources by its kind:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>kubectl -n eda get indexallocationpools
</span></code></pre></div> </details> <h3 id=find-allocated-asn-numbers><span class="enumerate-headings-plugin enumerate-heading-plugin">1.3.2</span> Find Allocated ASN Numbers<a class=headerlink href=#find-allocated-asn-numbers title="Permanent link">#</a></h3> <p>Now that you know what allocation pools exist in your EDA instance, it is time to find out how these pools are used.</p> <p>The SReXperts 2025 topology that is deployed in the lab environment you work on used EDA to deploy the fabric configuration over the three leafs and two spines that make up the datacenter topology.</p> <figure> <div class=mxgraph data-mxgraph='{"page":0,"zoom":1.5,"highlight":"#0000ff","nav":true,"resize":true,"edit":"_blank","url":"https://raw.githubusercontent.com/srexperts/hackathon-diagrams/main/eda.drawio"}' style="max-width:100%;border:1px solid transparent;margin:0 auto; display:block; box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); border-radius: 0.25rem;"> </div> <figcaption>EDA Managed nodes</figcaption> </figure> <p>The pre-created <strong>Fabric</strong> resource configured the data center underlay to make it possible to create virtual networks on top of it. In particular, the Fabric resource is responsible for the following configuration on the managed nodes:</p> <ul> <li>export/import policies</li> <li>network instances</li> <li>bgp peers in the underlay and overlay</li> <li>inter-switch link configs</li> <li>and so on and so forth</li> </ul> <p>And all that, by submitting a single Fabric resource, that looks like in its entirety like this:</p> <div class="language-yaml highlight"><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal><a href=#__codelineno-6-1> 1</a></span>
<span class=normal><a href=#__codelineno-6-2> 2</a></span>
<span class=normal><a href=#__codelineno-6-3> 3</a></span>
<span class=normal><a href=#__codelineno-6-4> 4</a></span>
<span class=normal><a href=#__codelineno-6-5> 5</a></span>
<span class=normal><a href=#__codelineno-6-6> 6</a></span>
<span class=normal><a href=#__codelineno-6-7> 7</a></span>
<span class=normal><a href=#__codelineno-6-8> 8</a></span>
<span class=normal><a href=#__codelineno-6-9> 9</a></span>
<span class=normal><a href=#__codelineno-6-10>10</a></span>
<span class=normal><a href=#__codelineno-6-11>11</a></span>
<span class=normal><a href=#__codelineno-6-12>12</a></span>
<span class=normal><a href=#__codelineno-6-13>13</a></span>
<span class=normal><a href=#__codelineno-6-14>14</a></span>
<span class=normal><a href=#__codelineno-6-15>15</a></span>
<span class=normal><a href=#__codelineno-6-16>16</a></span>
<span class=normal><a href=#__codelineno-6-17>17</a></span>
<span class=normal><a href=#__codelineno-6-18>18</a></span>
<span class=normal><a href=#__codelineno-6-19>19</a></span>
<span class=normal><a href=#__codelineno-6-20>20</a></span>
<span class=normal><a href=#__codelineno-6-21>21</a></span>
<span class=normal><a href=#__codelineno-6-22>22</a></span>
<span class=normal><a href=#__codelineno-6-23>23</a></span>
<span class=normal><a href=#__codelineno-6-24>24</a></span>
<span class=normal><a href=#__codelineno-6-25>25</a></span>
<span class=normal><a href=#__codelineno-6-26>26</a></span>
<span class=normal><a href=#__codelineno-6-27>27</a></span>
<span class=normal><a href=#__codelineno-6-28>28</a></span>
<span class=normal><a href=#__codelineno-6-29>29</a></span>
<span class=normal><a href=#__codelineno-6-30>30</a></span>
<span class=normal><a href=#__codelineno-6-31>31</a></span>
<span class=normal><a href=#__codelineno-6-32>32</a></span>
<span class=normal><a href=#__codelineno-6-33>33</a></span>
<span class=normal><a href=#__codelineno-6-34>34</a></span>
<span class=normal><a href=#__codelineno-6-35>35</a></span>
<span class=normal><a href=#__codelineno-6-36>36</a></span>
<span class=normal><a href=#__codelineno-6-37>37</a></span>
<span class=normal><a href=#__codelineno-6-38>38</a></span>
<span class=normal><a href=#__codelineno-6-39>39</a></span>
<span class=normal><a href=#__codelineno-6-40>40</a></span>
<span class=normal><a href=#__codelineno-6-41>41</a></span>
<span class=normal><a href=#__codelineno-6-42>42</a></span>
<span class=normal><a href=#__codelineno-6-43>43</a></span>
<span class=normal><a href=#__codelineno-6-44>44</a></span>
<span class=normal><a href=#__codelineno-6-45>45</a></span>
<span class=normal><a href=#__codelineno-6-46>46</a></span>
<span class=normal><a href=#__codelineno-6-47>47</a></span>
<span class=normal><a href=#__codelineno-6-48>48</a></span>
<span class=normal><a href=#__codelineno-6-49>49</a></span></pre></div></td><td class=code><div><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">fabrics.eda.nokia.com/v1alpha1</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Fabric</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">srexperts-fabric</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7></a><span class=w>    </span><span class=nt>role</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">hackathon-infra</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9></a><span class=w>  </span><span class=nt>borderLeafs</span><span class=p>:</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10></a><span class=w>    </span><span class=nt>borderLeafNodeSelector</span><span class=p>:</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=borderleaf</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12></a><span class=w>  </span><span class=nt>interSwitchLinks</span><span class=p>:</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13></a><span class=w>    </span><span class=nt>linkSelector</span><span class=p>:</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14></a><span class=hll><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=interSwitch</span>
</span></span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15></a><span class=w>    </span><span class=nt>unnumbered</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IPV6</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16></a><span class=w>  </span><span class=nt>leafs</span><span class=p>:</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17></a><span class=w>    </span><span class=nt>leafNodeSelector</span><span class=p>:</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=leaf</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19></a><span class=w>  </span><span class=nt>overlayProtocol</span><span class=p>:</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20></a><span class=w>    </span><span class=nt>bfd</span><span class=p>:</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21></a><span class=w>      </span><span class=nt>desiredMinTransmitInt</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22></a><span class=w>      </span><span class=nt>detectionMultiplier</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24></a><span class=w>      </span><span class=nt>minEchoReceiveInterval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25></a><span class=w>      </span><span class=nt>requiredMinReceive</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26></a><span class=hll><span class=w>    </span><span class=nt>bgp</span><span class=p>:</span>
</span></span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27></a><span class=w>      </span><span class=nt>autonomousSystem</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">65000</span>
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28></a><span class=w>      </span><span class=nt>clusterID</span><span class=p>:</span><span class=w> </span><span class=s>'1'</span>
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29></a><span class=hll><span class=w>      </span><span class=nt>rrClientNodeSelector</span><span class=p>:</span>
</span></span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30></a><span class=hll><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=leaf</span>
</span></span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=borderleaf</span>
</span><span id=__span-6-32><a id=__codelineno-6-32 name=__codelineno-6-32></a><span class=w>      </span><span class=nt>rrNodeSelector</span><span class=p>:</span>
</span><span id=__span-6-33><a id=__codelineno-6-33 name=__codelineno-6-33></a><span class=hll><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=spine</span>
</span></span><span id=__span-6-34><a id=__codelineno-6-34 name=__codelineno-6-34></a><span class=w>    </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">IBGP</span>
</span><span id=__span-6-35><a id=__codelineno-6-35 name=__codelineno-6-35></a><span class=w>  </span><span class=nt>spines</span><span class=p>:</span>
</span><span id=__span-6-36><a id=__codelineno-6-36 name=__codelineno-6-36></a><span class=w>    </span><span class=nt>spineNodeSelector</span><span class=p>:</span>
</span><span id=__span-6-37><a id=__codelineno-6-37 name=__codelineno-6-37></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eda.nokia.com/role=spine</span>
</span><span id=__span-6-38><a id=__codelineno-6-38 name=__codelineno-6-38></a><span class=w>  </span><span class=nt>systemPoolIPV4</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">systemipv4-pool</span>
</span><span id=__span-6-39><a id=__codelineno-6-39 name=__codelineno-6-39></a><span class=w>  </span><span class=nt>underlayProtocol</span><span class=p>:</span>
</span><span id=__span-6-40><a id=__codelineno-6-40 name=__codelineno-6-40></a><span class=w>    </span><span class=nt>bfd</span><span class=p>:</span>
</span><span id=__span-6-41><a id=__codelineno-6-41 name=__codelineno-6-41></a><span class=w>      </span><span class=nt>desiredMinTransmitInt</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
</span><span id=__span-6-42><a id=__codelineno-6-42 name=__codelineno-6-42></a><span class=w>      </span><span class=nt>detectionMultiplier</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id=__span-6-43><a id=__codelineno-6-43 name=__codelineno-6-43></a><span class=w>      </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-6-44><a id=__codelineno-6-44 name=__codelineno-6-44></a><span class=w>      </span><span class=nt>minEchoReceiveInterval</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
</span><span id=__span-6-45><a id=__codelineno-6-45 name=__codelineno-6-45></a><span class=w>      </span><span class=nt>requiredMinReceive</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
</span><span id=__span-6-46><a id=__codelineno-6-46 name=__codelineno-6-46></a><span class=w>    </span><span class=nt>bgp</span><span class=p>:</span>
</span><span id=__span-6-47><a id=__codelineno-6-47 name=__codelineno-6-47></a><span class=w>      </span><span class=nt>asnPool</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">asn-pool</span>
</span><span id=__span-6-48><a id=__codelineno-6-48 name=__codelineno-6-48></a><span class=w>    </span><span class=nt>protocol</span><span class=p>:</span>
</span><span id=__span-6-49><a id=__codelineno-6-49 name=__codelineno-6-49></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">EBGP</span>
</span></code></pre></div></td></tr></table></div> <p>Checkout the highlighted lines in the Fabric resource YAML. This is where we reference allocation pools of different kinds.</p> <p>The Fabric application that processes the Fabric resource sees the referenced allocation pools and uses EDA SDK to request a next allocation for a particular resource.</p> <p>You can check what values have been allocated from the relevant allocation pools using EQL. We are interested in the <strong>AS Numbers</strong> allocated for the data center switches, and as shown in the Fabric resource definition, the <code>srexperts-asnpool</code> is the allocation pool that is used to allocate AS Numbers.</p> <p>Open the Queries page and list allocated values by submitting the following EQL query:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a>.namespace.allocations.v1.template.instance.allocation where ( .namespace.allocations.v1.template.name = "srexperts-asnpool" )
</span></code></pre></div> <p>This query lists the allocation key that an application used to request an AS number and the associated value.</p> <p><a class=glightbox data-desc-position=bottom data-height=auto data-type=image data-width=auto href=https://gitlab.com/rdodin/pics/-/wikis/uploads/f5dc68342bfb509e2b21866102798a3d/CleanShot_2025-08-14_at_14.45.11.webp><img alt=allocations src=https://gitlab.com/rdodin/pics/-/wikis/uploads/f5dc68342bfb509e2b21866102798a3d/CleanShot_2025-08-14_at_14.45.11.webp></a></p> <p>The result of this query shows that our leafs have been allocated AS numbers from the <code>srexperts-asnpool</code>, namely:</p> <ul> <li>leaf11 - 4200001000</li> <li>leaf12 - 4200001001</li> <li>leaf13 - 4200001002</li> </ul> <h3 id=changing-as-numbering-scheme><span class="enumerate-headings-plugin enumerate-heading-plugin">1.3.3</span> Changing AS Numbering scheme<a class=headerlink href=#changing-as-numbering-scheme title="Permanent link">#</a></h3> <p>In this task you are asked to change the AS Numbers used for the data center switches in our fabric from the default starting range of 4200001000 to some other 4-byte ASN range.</p> <details class=example> <summary>Hints</summary> <p>You can edit the existing <code>srexperts-asnpool</code> allocation pool and change the start and size of the AS Number range to fit the 2-byte AS Number scheme.</p> <p>If you want a more challenging task, create a new pool and reference it from the Fabric resource under the <code>leafs</code> block, while keeping spines using the original allocation pool.</p> </details> <blockquote> <p>When changing the pool configuration don't commit the change right away, use the <a href=declarative-intents.html#dry-run>Dry Run</a> functionality to appreciate the automation mechanics that will expand a single pool change to a configuration change across the entire fabric.</p> </blockquote> <p>By completing these tasks you should have a basic understanding of Allocation Pools used in EDA. What are they used for, what types of pools we have in the product and how they serve different purposes.</p> <p>You also learned how to find what allocation values have been used, change existing and create new allocation pools, and how resources reference the pools to request identifiers from them.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © 2021-2026 Nokia </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/nokia/SReXperts rel=noopener target=_blank title=github.com> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.13a4f30d.min.js></script> <script src=../../javascripts/sh-annotation.js></script> <script src=../../javascripts/drawio-reinit.js></script> <script src=../../javascripts/drawio-viewer.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body> </html>